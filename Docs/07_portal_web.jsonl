{"chunk_id": "07_portal_web__discussions__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/discussions", "title": "Discussions", "section_heading": "Steps to Setup the Discussions Component", "content": "## Steps to Setup the Discussions Component\n\nYou can now add a discussions component on any web page of the portal. The discussions component allows logged in users to enter and share messages with other users. This component can be used for discussions or to setup a portal where users help each other with their queries.\n\n![Discussions Component](/files/Screenshot%202022-02-07%20at%203.34.37%20PM.png)\n\n### Steps to Setup the Discussions Component\n\n1. Open the web page document on which you want to add the discussions component or create a new web page and save it.\n2. Scroll to the Page Building Blocks table.\n3. Under Web Template select Discussions.\n   ![Page Building Blocks](/files/Screenshot%202022-02-07%20at%203.56.53%20PM.png)\n4. Click on Edit values.\n   ![Edit Values](/files/Screenshot%202022-02-07%20at%203.53.57%20PM.png)\n5. Enter a Title, CTA Title and select the Web Page as the current web page name.\n6. You can check Single Thread if you want the discussion to be single threaded.\n7. Save the page.", "content_type": "prose", "has_code": false, "token_count": 255}
{"chunk_id": "07_portal_web__portal-pages__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/portal-pages", "title": "Portal Pages", "section_heading": "Adding pages", "content": "## Adding pages\n\nFrappe Framework not only provides a rich admin interface via the\n[Desk](/framework/v14/user/en/desk) which is an SPA but also static server rendered web\npages. These pages are generally built for your website visitors. They can be\npublic or can require login.\n\n### Adding pages\n\nEvery frappe app including frappe comes with a `www` folder which directly maps\nto website urls. Here is what the directory structure looks like:\n\n```python\nfrappe/www\n\u251c\u2500\u2500 about.html\n\u251c\u2500\u2500 about.py\n\u251c\u2500\u2500 contact.html\n\u251c\u2500\u2500 contact.py\n\u251c\u2500\u2500 desk.html\n\u251c\u2500\u2500 desk.py\n\u251c\u2500\u2500 login.html\n\u251c\u2500\u2500 login.py\n\u251c\u2500\u2500 me.html\n\u2514\u2500\u2500 me.py\n```\n\nThis structure enables the routes `/about`, `/contact`, `/desk`, `/login` and\n`/me`.\n\nTo add your own page, just add an HTML file in the `www` folder of your app.\nThere are multiple ways to organize these portal pages. For example,\n\n```python\ncustom_app/www\n\u251c\u2500\u2500 custom_page.html\n\u2514\u2500\u2500 custom_page.py\n```\n\nWill be rendered on the route `/custom_page`.\n\nTo add subpages you can convert your main page into a folder and add its content\nin an index file. For example,\n\n```python\ncustom_app/www\n\u2514\u2500\u2500 custom_page\n \u251c\u2500\u2500 index.html\n \u251c\u2500\u2500 index.py\n \u251c\u2500\u2500 subpage.html\n \u2514\u2500\u2500 subpage.py\n```\n\nWill still be rendered on the route `/custom_page` and `/custom_page/subpage`\nwill also be available.\n\n> You can write `.md` files instead of `.html` for simple static pages like\n> documentation. This documentation you are reading is written as a markdown file.\n\n### Overriding standard pages\n\nFrappe also allows you to override standard pages through your custom app. For\nexample, to override the standard `/about` provided by frappe, just add a file\nnamed `about.html` in the `www` folder of your app and it will take precedence.", "content_type": "mixed", "has_code": true, "token_count": 427}
{"chunk_id": "07_portal_web__portal-pages__002", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/portal-pages", "title": "Portal Pages", "section_heading": "Templating", "content": "## Templating\n\nYou can add dynamic content to Portal Pages using Jinja templates. All of the\nportal pages extend from the base template `frappe/templates/web.html` which\nitself extends from `frappe/templates/base.html`.\n\nHere is what a sample page might look like:\n\n```python\n{% extends \"templates/web.html\" %}\n\n{% block title %}{% endblock %}\n\n{% block page_content %}\n\n====================\n\n We believe that great companies are driven by excellence,\n and add value to both its customers and society.\n You will find our team embibes these values.\n \n\n{% endblock %}\n```\n\nYou can also omit the `extend` and `block` if you want to the use the default\nbase template.\n\n```python\n\n====================\n\n We believe that great companies are driven by excellence,\n and add value to both its customers and society.\n You will find our team embibes these values.\n```", "content_type": "mixed", "has_code": true, "token_count": 214}
{"chunk_id": "07_portal_web__portal-pages__003", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/portal-pages", "title": "Portal Pages", "section_heading": "Context", "content": "## Context\n\nEvery portal page can have a python controller which will build `context` for\nthe page. The controller should have the same name as the `.html` or `.md` file\nwith a `.py` extension.\n\n```python\ncustom_app/www\n\u251c\u2500\u2500 custom_page.html\n\u2514\u2500\u2500 custom_page.py\n```\n\nThe controller should have a `get_context` method which takes a `context` dict,\nadds any data to it and then returns it. Here is what a sample page controller\nmight look like:\n\n```python\n# about.py\nimport frappe\n\ndef get_context(context):\n context.about_us_settings = frappe.get_doc('About Us Settings')\n return context\n```\n\nUsage in template\n\n```python\n\n====================\n\n We believe that great companies are driven by excellence,\n and add value to both its customers and society.\n You will find our team embibes these values.\n \n\n {% if about_us_settings.show_contact_us %}\n [Contact Us](/contact)\n {% endif %}\n```\n\n> Since Portal Pages are built using Jinja, frappe provides a standard\n> [API](/framework/v14/user/en/api/jinja) to use in jinja templates.", "content_type": "mixed", "has_code": true, "token_count": 256}
{"chunk_id": "07_portal_web__portal-pages__004", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/portal-pages", "title": "Portal Pages", "section_heading": "List of standard context keys", "content": "## List of standard context keys\n\nHere is a list of all the standard keys that can be set in `context` and their\nfunctionalities.\n\n| Context Key | Functionality |\n| --- | --- |\n| `add_breadcrumbs` | Add breadcrumbs to page |\n| `no_breadcrumbs` | Remove breadcrumbs from page |\n| `show_sidebar` | Show web sidebar |\n| `safe_render` | Toggle [safe\\_render](#safe_render) |\n| `no_header` | Hide header |\n| `no_cache` | Disable caching for this page |\n| `sitemap` | Include/exclude page in sitemap |\n| `add_next_prev_links` | Add Next and Previous navigation buttons |\n| `title` | Set the page title |\n\n### safe\\_render\n\n`frappe.render_template` does not render a template which contains the string\n`.__` to prevent running any illegal python expressions. You may want to disable\nthis behaviour if you are sure that the content is safe. To do this, you need to\nturn off safe render by setting the value of `safe_render` key to `False` in\ncontext.", "content_type": "prose", "has_code": false, "token_count": 235}
{"chunk_id": "07_portal_web__portal-pages__005", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/portal-pages", "title": "Portal Pages", "section_heading": "Set context via frontmatter", "content": "## Set context via frontmatter\n\nYou can also set values in context using a frontmatter block. Frontmatter blocks\ncan be used to set static values specific to a page like meta tags.\n\nTake a look at the following example:\n\n```python\n---\ntitle: Introduction\nmetatags:\n description: This is description for the introduction page\n---\n\n# Introduction\nThis is an introduction page\n```\n\nThe above frontmatter block will update the `context` dict with the following values:\n\n```python\n{\n 'title': 'Introduction',\n 'metatags': {\n 'description': 'This is description for the introduction page'\n }\n}\n```\n\n### Set context via comments\n\nYou can also set some values in context by adding html comments in your pages.\n\nFor example by adding `` to your `.html` or `.md` file,\n`context.add_breadcrumbs` will be set to `True` and it will automatically generate\nbreadcrumbs based on folder structure.\n\n```python\n\n====================\n\n We believe that great companies are driven by excellence,\n and add value to both its customers and society.\n You will find our team embibes these values.\n \n\n {% if about_us_settings.show_contact_us %}\n [Contact Us](/contact)\n {% endif %}\n```\n\nHere is a list of keys that you can set and their context values:\n\n| Comment | Context Value |\n| --- | --- |\n| `` | `add_breadcrumbs = 1` |\n| `` | `no_breadcrumbs = 1` |\n| `` | `show_sidebar = 1` |\n| `` | `no_header = 1` |\n| `` | `no_cache = 1` |\n| `` | `sitemap = 0` |\n| `` | `sitemap = 1` |\n| `` | `add_next_prev_links = 1` |\n| `` | `title = 'Custom Title'` |\n| `` | `base_template = 'custom_app/path/to/custom_base.html'` |\n\n### Custom CSS and JS\n\nYou can add custom CSS and JS for your pages by dropping a `.css` or `.js` file\nof the same name.\n\n```python\ncustom_app/www\n\u251c\u2500\u2500 custom_page.html\n\u251c\u2500\u2500 custom_page.css\n\u251c\u2500\u2500 custom_page.js\n\u2514\u2500\u2500 custom_page.py\n```\n\n### Home Page\n\nThe home page for your portal can be defined in\n\n1. Role\n2. Portal Settings (this will be for logged in users)\n3. Via Hook `get_website_user_home_page`\n4. Website Settings (this will be for non logged in users as well - i.e. Guest)", "content_type": "mixed", "has_code": true, "token_count": 516}
{"chunk_id": "07_portal_web__blog-post__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/blog-post", "title": "Blog Post", "section_heading": "1. How to create a Blog Post", "content": "## 1. How to create a Blog Post\n\n**A Blog Post is an article on your website.**\n\nBlogs are a great way to share your thoughts about your business.\nIt helps keep your customers and readers updated on news related to your business.\n\nIn the age of the internet, writing assumes a lot of significance because when\npeople come to your website, they want to read about you and your product.\n\nTo access the Blog Post, go to:\n\n> Home > Website > Blog > Blog Post\n\n### 1. How to create a Blog Post\n\n1. Go to the Blog Post list and click on New.\n2. Enter the Title, Blog Category, Blogger, and the Content.\n3. Enable Published and click on Save.\n\nThe Blog Intro is a short description of your blog that appears just after the\ntitle and before the content.\n\n![New Blog Post](/files/v-14-new-blog-post.png)\n\nYou can write your blog in Rich Text, Markdown, or HTML. If you want to write\nsimple content pages, Rich Text and Markdown are great options.\n\n> Learn markdown in a few minutes at [Mastering Markdown](https://guides.github.com/features/mastering-markdown/).\n\n![Blog Post in Markdown](/files/v-14-blog-post-in-markdown.png)\n*Blog Post in Markdown*\n\nView your Blog Post by clicking on **See on Website** in the sidebar.\n![Blog Post](/files/blog-post.png)\n*Blog Post*\n\nReaders can comment on the blog post. The guest user will have to enter their **Name** and **Email** to comment.\n\n![Blog Post](/files/blog-post-comment-closed.png)\n![Blog Post](/files/blog-post-comment-open.png)\n\nCheck the **Disable Comments** option if you'd like to disable the ability for readers to add comments to the current blog post.\n![Blog Post](/files/v-14-blog-post-disable-comments.png)\n\n![Blog Post](/files/blog-post-no-comments.png)\n*Adding Comments Disabled*\n\nReaders can give likes on their favorite blog posts.\n![Blog Post](/files/blog-post-like-default.png)\n![Blog Post](/files/blog-post-liked.png)\n*Like*\n\nCheck the **Disable Likes** option if you'd like to disable the ability for readers to give like to the current blog post.\n![Blog Post](/files/v-14-blog-post-disable-likes.png)\n![Blog Post](/files/blog-post-no-like.png)\n\nWhen a reader comments on a blog post or gives a like, an email is sent to the blogger with a link to the comment/like on the blog post.\nIf the blogger doesn't want to receive any email he/can uncheck the **Enable Email Notification** checkbox.\n![Blog Post](/files/v14-blog-post-enable-email-notification.png)\n\n### 2.1 Blogger\n\nBlogger is a user who can post blogs. To create a Blogger, go to:\n\n> Home > Website > Blog > Blogger\n\nYou can mention a short bio about the blogger and also set an avatar here.\n\n![Blogger](/files/v-14-blogger.png)\n*Blogger*\n\nThe preview will be shown at the end of the blog post.\n![Blogger Preview](/files/v-14-blogger-preview.png)\n*Blogger Preview*\n\n### 2.2 Blog Category\n\nYou can group your blogs into categories. To create a new Blog Category, go to:\n\n**Home > Website > Blog > Blog Category**.\n\n![Blog Category](/files/blog-category.png)\n*Blog Category*\n\nIf you click on **See on Website** in the sidebar, you'll be redirected to a\nlist of blogs under that category.\n\n![Blog Category - General](/files/blog-category-web-view.png)\n*Blog Category - General*", "content_type": "prose", "has_code": false, "token_count": 798}
{"chunk_id": "07_portal_web__blog-post__002", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/blog-post", "title": "Blog Post", "section_heading": "2.3 Meta Tags", "content": "## 2.3 Meta Tags\n\nMeta tags are HTML tags which describe a page and its content to a search engine or a social media platform. A meta description provides a brief description of a webpage.\n\nIn HTML, the meta description tag will be written as follows:\n\n```python\n\n```\n\nUnder the SEO section, you can add the meta description and image for your blog post. ERPNext will generate a preview of the blog when listed as a search result by Google.\n\nIf you leave this section empty, the blog introduction or the first 140 characters of the blog will be shown as the meta description. In the same way, if you leave the meta image empty, the first image in the blog will be selected.\n\n![Google Search Preview](/files/v-14-blog-post-seo-meta.png)\n*Blog Post Google Search Preview*\n\nOn submitting the blog, you can also preview how the blog will look when shared on a social media platform like Facebook or Twitter. To check this, use the debugging tools offered by the platforms:\n\n* Facebook: [Sharing Debugger](https://developers.facebook.com/tools/debug/)\n* Twitter: [Card Validator](https://cards-dev.twitter.com/validator)\n* LinkedIn: [Post Inspector](https://www.linkedin.com/post-inspector/inspect/)\n\nTo check the post preview, simply enter the webpage/blog link in the tool:\n\n![Facebook Sharing Debugger](/files/blog-post-facebook-debugger.png)\n*Using Facebook's Sharing Debugger Tool*\n\nUsing these tools, you can optimize your blog post for sharing.", "content_type": "mixed", "has_code": true, "token_count": 361}
{"chunk_id": "07_portal_web__web-form__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/web-form", "title": "Web Form", "section_heading": "Creating a Web Form", "content": "## Creating a Web Form\n\nFrappe provides an easy way to generate forms for your website with very little\nconfiguration. These forms may be public (anyone can fill them up) or can be\nconfigured to require login.\n\n![Web Form](/files/v-14-webform-conference-register.png)\n\n### Creating a Web Form\n\nTo create a Web Form, type \"new web form\" in awesomebar and hit enter.\n\n1. Enter Title\n2. Select DocType for which the record should be created.\n3. Add some introduction (Optional).\n4. Click on \"Get Fields\" button to get all fields from selected doctype OR select fields for your web form.\n5. Publish it and you are good to go.\n\n![Create Web Form](/files/v-14-webform.png)\n![Web Form Fields](/files/v-14-webform-fields.png)\n\n[Customize Web Form \u2192](/framework/v14/user/en/web-form/customization)\n\n### Standard Web Forms\n\nIf you check the \"Is Standard\" checkbox, a new folder will be created in the\n`module` of the Web Form. In this folder, you will see a `.py` and `.js` file\nthat you can use to configure the web form. These files need to be checked into\nversion control with your custom app. You can install this app on any site and\nit will have this web form installed.\n\n> `Is Standard` field will only be visible when you are in developer mode.", "content_type": "prose", "has_code": false, "token_count": 310}
{"chunk_id": "07_portal_web__web-form__settings__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/web-form/settings", "title": "Settings", "section_heading": "Webform Settings", "content": "## Webform Settings\n\nThere are multiple checkboxs in the `Settings` tab that can be used to enable and disable different functionalities.\n\n### Login Required\n\nIf you want responses from guest user, just disable the `login_required` checkbox. Logged In users can also use it. It is disabled by default.\n\nIf you only want responses from logged in user just enable the `login_required` checkbox.\n\n> Enabling it will make **Allow Multiple Responses, Allow Editing After Submit, Allow Delete, Allow Comments, Show Attachments** and **Show List** checkboxes visible.\n\n### Allow Multiple Responses\n\nIt is used to enable users to give multiple responses which they can see in Webform List View.\n\n> Enabling it will also enable [show\\_list](/framework/v14/user/en/web-form/settings#show-list) checkbox in List Setting section\n\n### Allow Editing After Submit\n\nIt will allow user to edit there submitted responses.\n\n### Allow Delete\n\nIt will allow user to delete there submitted responses from Webform List View.\n\n### Anonymous\n\nBy setting this the response received will be anonymous.\n\n### Apply Document Permission\n\nBy default if user has read access to the documents submitted by different users it will be visible in the Webform List View. But he/she can only open the record from list view if **Apply Document Permission** checkbox is checked.\n\n### Allow Print\n\nIt will add a print button to print the document. It will only be visible on View Mode.\n\n### Allow Comments\n\nIt will add comment section below the webform where users can communicate. All the comments will be linked to the document.\n\n### Show Attachments\n\nIt will show all the attachments attached in the document in Attachment Section.\n\n### Max Attachment Size (in MB)\n\nIt will restrict users to attach large files.\n\n### Allow Incomplete Forms\n\nIt will allow submission of forms even if mandatory fields are not populated.\n\n### List Settings\n\n![Web Form](/files/v-14-web-form-list-settings.png)\n\n### Show List\n\nIt will enable `List View` where you can see all the submitted forms. You can only open the form that you own. ![Web Form](/files/v-14-web-form-list-view.png)\n\n> If `apply_document_permissions` is enabled you can open other forms.\n\n### Title & List Columns\n\nYou can change the title of the list and also can add/remove/arrange list view columns ![Web Form](/files/v-14-web-form-update-title-list-columns.png) ![Web Form](/files/v-14-web-form-updated-list-view.png)\n\n### Sidebar Settings\n\n![Web Form](/files/v-14-web-form-show-sidebar.png)\n\n### Show Sidebar\n\nShow webform with sidebar. Select or create a website sidebar where you can add link to current webform and other related webforms or webpages. ![Web Form](/files/v-14-web-form-with-sidebar.png)", "content_type": "prose", "has_code": false, "token_count": 680}
{"chunk_id": "07_portal_web__web-form__customization__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/web-form/customization", "title": "Customization", "section_heading": "Fields Layout", "content": "## Fields Layout\n\nYou can customize your webform to make it more unique and enable functionalities to meet your usecase.\n\n### Fields Layout\n\nYou can add `Column Breaks` & `Section Breaks` in webform fields table to change the layout of the form fields.\n![Web Form Field Layout](/files/v-14-webform-field-layout.png)\n![Web Form Layout](/files/v-14-webform-layout.png)\n\n### Multi Step Webform\n\nUpdating the layout makes webform look better but still if webform has many fields it becomes lengthy.\nWe can add `Page Breaks` to segregate the sections in different pages (called as Multi Step Webform).\n\n> You can add maximum 9 Page Breaks which will only allow 10 Pages.\n\n![Web Form Page Break](/files/v-14-webform-page-break.png)\n![Step Web Form Page 1](/files/v-14-step-webform-page1.png)\n![Step Web Form Page 2](/files/v-14-step-webform-page2.png)\n\n> All the customization options mentioned below can be done from the Customization Tab of webform document.\n\n### Submit Button Label\n\nYou can change the label of submit button on the webform.\n![Web Form Submit Label](/files/v-14-webform-submit-label.png)\n\n### Banner Image\n\nYou can now add banner image on webform.\n![Banner Image](/files/v-14-webform-banner-image.png)\n\n### Breadcrumbs\n\nYou can customize the breadcrumbs in a Web Form by adding JSON object.\n\n> Breadcrumbs are only visible if the webform [`list view`](/framework/v14/user/en/web-form/settings#list-settings) is enabled.\n\nExample:\n![Custom Breadcrumbs](/files/v-14-webform-custom-breadcrumbs.png)\n![Webform Breadcrumbs](/files/v-14-webform-breadcrumbs.png)", "content_type": "prose", "has_code": false, "token_count": 392}
{"chunk_id": "07_portal_web__web-form__customization__002", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/web-form/customization", "title": "Customization", "section_heading": "After Submit Page", "content": "## After Submit Page\n\nYou can give custom success title and message which will appear after user has submitted the webform.\n![Webform Success Title & Message](/files/v-14-success-title-message.png)\n![Webform Success Page](/files/v-14-success-page.png)\n\nBased on the access extra buttons will be visible on the submit page like\n\nSee previous responses\n\nEdit your response\n\nView your response\n&\n\nSubmit another response\n\n![Webform Success Page](/files/v-14-success-actions.png)\n\nConfigure your webform to redirect to a specific URL after 5 seconds after it has been submitted by setting `success_url` field.\n![Webform Breadcrumbs](/files/SuccessURLGif.gif)\n\n### Custom CSS\n\nYou can add custom css to change the look of the webform\n\nExample:\n\n```python\n.web-form-header {\n margin-bottom: 2rem;\n border: 1px solid var(--blue-200) !important;\n border-radius: var(--border-radius);\n background-color: var(--blue-50) !important;\n}\n\n.web-form-head {\n border: none !important;\n padding-bottom: 2rem !important;\n}\n\n.web-form {\n border: 1px solid var(--dark-border-color) !important;\n border-radius: var(--border-radius);\n padding-top: 2rem !important;\n}\n```\n\n![Web Form Custom CSS](/files/v-14-webform-custom-css.png)\n\n### Client Script\n\nYou can also add a custom client script to the web form\n\n### Event Handler\n\nWrite an event handler to do actions when a field is changed.\n\n```python\nfrappe.web_form.on([fieldname], [handler]);\n```\n\n### Get Value\n\nGet value of a particular field\n\n```python\nvalue = frappe.web_form.get_value([fieldname]);\n```\n\n### Set Value\n\nSet value of a particular field\n\n```python\nfrappe.web_form.set_value([fieldname], [value])\n```\n\n### Validate\n\n`frappe.web_form.validate` is called before the web\\_form is saved. Add custom\nvalidation by overriding the `validate` method. To stop the user from saving,\nreturn `false`;\n\n```python\nfrappe.web_form.validate = () => {\n // return false if not valid\n}\n```\n\n### Set Field Property\n\n```python\nfrappe.web_form.set_df_property([fieldname], [property], [value]);\n```\n\n### Trigger script when form is loaded\n\nInitialize form with customisation after it is loaded\n\n```python\nfrappe.web_form.after_load = () => {\n // init script here\n}\n```\n\n### Reset value if invalid\n\n```python\nfrappe.web_form.on('amount', (field, value) => {\n if (value < 1000) {\n frappe.msgprint('Value must be more than 1000');\n field.set_value(0);\n }\n});\n```\n\n### Custom Validation\n\n```python\nfrappe.web_form.validate = () => {\n let data = frappe.web_form.get_values();\n if (data.amount < 1000) {\n frappe.msgprint('Value must be more than 1000');\n return false;\n }\n});\n```\n\n### Hide a field based on value\n\n```python\nfrappe.web_form.on('amount', (field, value) => {\n if (value < 1000) {\n frappe.web_form.set_df_property('rate', 'hidden', 1);\n }\n});\n```\n\n### Show a message on startup\n\n```python\nfrappe.web_form.after_load = () => {\n frappe.msgprint('Please fill all values carefully');\n}\n```", "content_type": "mixed", "has_code": true, "token_count": 729}
{"chunk_id": "07_portal_web__guides__portal-development__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/guides/portal-development", "title": "Portal Development", "section_heading": "", "content": "You can make your website by adding pages to the `/www` folder of your website. The urls of your site will match the path of your pages within the `/www` folder.\n\nPages must be `.html` or `.md` (Markdown) files. Basic HTML template is provided in frappe in `frappe/templates/base_template.html`", "content_type": "prose", "has_code": false, "token_count": 73}
{"chunk_id": "07_portal_web__guides__portal-development__ordering__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/guides/portal-development/ordering", "title": "Ordering", "section_heading": "", "content": "You can defining the ordering of pages in index by defining the index.txt file in your folder. The index.txt file must have the names (without extensions) of the pages in that folder indicating the order.\n\nFor example for this folder the `index.txt` looks like:\n\nadding-pages\nordering\ncontents\ncontext\nbuilding", "content_type": "prose", "has_code": false, "token_count": 77}
{"chunk_id": "07_portal_web__guides__portal-development__adding-pages__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/guides/portal-development/adding-pages", "title": "Adding Pages", "section_heading": "Index", "content": "## Index\n\nTo add pages, just add `.html` or `.md` files in the `www` folder. The pages must only have the content, not the `and` tags.\n\nYou can also write markdown pages\n\n### Index\n\nThe first file in a folder must be called `index.md` or `index.html`\n\nEither file must be present for the system to make this a valid folder to build pages.\n\n### This is a title\n\nThis is some page content\na [link](/link/to/page)\n\n### Adding Links\n\nLinks urls to pages can be given without the `.html` extension for example `/home/link`\n\n### The first `` block if present will be the page title if not specified in a special tag. If no `\n\n` or title is specified, the file name will be the title.\n\n### Adding CSS\n\nYou can also add a `.css` file with the same filename (e.g. `index.css` for `index.md`) that will be rendered with the page.\n\n### Special Tags\n\n1. `` will make the page render in Jinja\n2. `` will add a custom title\n3. `` will not add breadcrumbs in the page\n4. # `` will enable caching (if you have used Jinja templating)", "content_type": "prose", "has_code": false, "token_count": 254}
{"chunk_id": "07_portal_web__guides__portal-development__table-of-contents__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/guides/portal-development/table-of-contents", "title": "Table Of Contents", "section_heading": "This is a title", "content": "## This is a title\n\nYou can add a table of contents by adding `{index\u200b}` string on a new line.\n\nYou can also make Previous and Next buttons by adding `previous` or `next` in `{}`\n\n### This is a title\n\nHello paragraph\n\n### Contents:\n\n{index\u200b} will render as a numbered list of pages, but works only in `index.md` or `index.html`.\n\n{next\u200b} for this Page will render as:\n\n{next}", "content_type": "prose", "has_code": false, "token_count": 93}
{"chunk_id": "07_portal_web__guides__portal-development__context__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/guides/portal-development/context", "title": "Context", "section_heading": "Example", "content": "## Example\n\nYou can render pages dynamically using Jinja templating language. To query data, you can update that `context` object that you pass to the template.\n\nThis can be done by adding a `.py` file with the same filename (e.g. `index.py` for `index.md`) with a `get_context` method.\n\n### Example\n\nIf you want to show a page to see users, make a `users.html` and `users.py` file in the `www/` folder.\n\nIn `users.py`:\n\n```python\nimport frappe\ndef get_context(context):\n context.users = frappe.get_list(\"User\", fields=[\"first_name\", \"last_name\"])\n```\n\nIn `users.html`:\n\n```python\n### List of Users\n\n{% for user in users %}\n 2.  \n\n{% endfor %}\n```", "content_type": "mixed", "has_code": true, "token_count": 161}
{"chunk_id": "07_portal_web__guides__portal-development__portal-roles__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/guides/portal-development/portal-roles", "title": "Portal Roles", "section_heading": "Rules for Default Role", "content": "## Rules for Default Role\n\nVersion: 7.1+\n\nRoles can be assigned to Website Users and they will see menu based on their role\n\n1. A default role can be set in **Portal Settings**\n2. Each Portal Menu Item can have a role associated with it. If that role is set, then only those users having that role can see that menu item\n3. Rules can be set for default roles that will be set on default users on hooks\n\n![Portal Settings](/files/portal-settings.png)\n\n### Rules for Default Role\n\nFor example if the Email Address matches with a contact id, then set role Customer or Supplier:\n\ndefault\\_roles = [\n{'role': 'Customer', 'doctype':'Contact', 'email\\_field': 'email\\_id',\n'filters': {'ifnull(customer, \"\")': ('!=', '')}},\n{'role': 'Supplier', 'doctype':'Contact', 'email\\_field': 'email\\_id',\n'filters': {'ifnull(supplier, \"\")': ('!=', '')}},\n{'role': 'Student', 'doctype':'Student', 'email\\_field': 'student\\_email\\_id'}\n]", "content_type": "prose", "has_code": false, "token_count": 229}
{"chunk_id": "07_portal_web__guides__portal-development__web-forms__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/guides/portal-development/web-forms", "title": "Web Forms", "section_heading": "Standard Web Forms", "content": "## Standard Web Forms\n\nWeb Forms are a powerful way to add forms to your website. Web forms are powerful and scriptable and from Version 7.1+ they also include tables, paging and other utilities\n\n![Web Form](/files/sample-web-form.png)\n\n### Standard Web Forms\n\nIf you check on the \"Is Standard\" checkbox, a new folder will be created in the `module` of the Web Form for that web form. In this folder, you will see a `.py` and `.js` file that you can customize the web form with.\n\n### Web Form Settings\n\n* **Allow Edit**: Allow each user to have one instance and edit it\n* **Allow Multiple**: Allow users to view and edit multiple instances of the web form\n* **Show as Grid**: Show table view of the web form values (only if \"Allow Multiple\" is set)\n* **Allow Incomplete Forms**: For very long forms, you can allow the user to save without throwing validation for mandatory. The user will still see the fields as manadatory.\n\n### Client Script\n\nYou can also add a custom client script to the web form\n\n### Event Handler\n\nWrite an event handler to do actions when a field is changed.\n\n```python\nfrappe.web_form.on([fieldname], [handler]);\n```\n\n### Get Value\n\nGet value of a particular field\n\n```python\nvalue = frappe.web_form.get_value([fieldname]);\n```\n\n### Set Value\n\nSet value of a particular field\n\n```python\nfrappe.web_form.set_value([fieldname], [value])\n```\n\n### Validate\n\n`frappe.web_form.validate` is called before the web\\_form is saved. Add custom validation by overriding the `validate` method. To stop the user from saving, return `false`;\n\n```python\nfrappe.web_form.validate = () => {\n // return false if not valid\n}\n```\n\n### Set Field Property\n\n```python\nfrappe.web_form.set_df_property([fieldname], [property], [value]);\n```\n\n### Trigger script when form is loaded\n\nInitialize form with customisation after it is loaded\n\n```python\nfrappe.web_form.after_load = () {\n // init script here\n}\n```\n\n### Reset value if invalid\n\n```python\nfrappe.web_form.on('amount', (field, value) => {\n if (value < 1000) {\n frappe.msgprint('Value must be more than 1000');\n field.set_value(0);\n }\n});\n```\n\n### Custom Validation\n\n```python\nfrappe.web_form.validate = () => {\n let data = frappe.web_form.get_values();\n if (data.amount < 1000) {\n frappe.msgprint('Value must be more than 1000');\n return false;\n }\n});\n```\n\n### Hide a field based on value\n\n```python\nfrappe.web_form.on('amount', (field, value) => {\n if (value < 1000) {\n frappe.web_form.set_df_property('rate', 'hidden', 1);\n }\n});\n```\n\n### Show a message on startup\n\n```python\nfrappe.web_form.after_load = () => {\n frappe.msgprint('Please fill all values carefully');\n}\n```\n\n### Breadcrumbs\n\nYou can customize the breadcrumbs in a Web Form by adding JSON object.\n\nExample:\n\n```python\n[{\"label\": \"Home\", \"route\":\"/\" }]\n```", "content_type": "mixed", "has_code": true, "token_count": 694}
{"chunk_id": "07_portal_web__guides__portal-development__generators__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/guides/portal-development/generators", "title": "Generators", "section_heading": "1. Add fields", "content": "## 1. Add fields\n\nIf every document in a table (DocType) corresponds to a web-page, you can setup generators.\n\nTo setup a generator you must:\n\n1. Add a field `route` that specifies the route of the page\n2. Add a condition field to indicate whether a page is viewable or not.\n3. Add the doctype name in `website_generators` in `hooks.py` of your app.\n4. Subclass the controller from `frappe.website.website_generator.WebsiteGenerator`\n5. Create a template for your page\n6. Add custom properties (context) for the template\n7. Customize route and list view\n\nLet us see this with the help of an example:\n\n### 1. Add fields\n\nWe added `published`, `route` in the DocType\n\n**Note:** The field `route` is mandatory\n\n![Generator fields](/files/generators.png)\n\n### 2. Added Website Generator to Hooks\n\nSince Job Opening is in `erpnext`, we have added to the list of existing generator hooks:\n\nwebsite\\_generators = [\"Item Group\", \"Item\", \"Sales Partner\", \"Job Opening\"]\n\nIf the `website_generators` property does not exist in your hooks.py, add it!\n\n### 3. Controller\n\nWe add the `website` property to the **JobOpening** class in `job_opening.py`\n\nIn `get_context`, `parents` property will indicate the breadcrumbs\n\nfrom frappe.website.website\\_generator import WebsiteGenerator\nfrom frappe import \\_\n\n### subclass from WebsiteGenerator, not Document\n\nclass JobOpening(WebsiteGenerator):\nwebsite = frappe.\\_dict(\ntemplate = \"templates/generators/job\\_opening.html\",\ncondition\\_field = \"published\",\npage\\_title\\_field = \"job\\_title\",\n)\n\ndef get\\_context(self, context):\n\n### show breadcrumbs\n\ncontext.parents = [{'name': 'jobs', 'title': \\_('All Jobs') }]\n\n**Note:** Once you do this, you should see the \"See in Website\" link on the document form.\n\n### 4. Add the template\n\nAdd the template in `erpnext/templates/generators/job_opening.html`\n\n{% raw %}{% extends \"templates/web.html\" %}\n\n{% block breadcrumbs %}\n{% include \"templates/includes/breadcrumbs.html\" %}\n{% endblock %}\n\n### {% block header %}\n\n{% endblock %}\n\n{% block page\\_content %}\n\n[](/job\\_application?job\\_title=)\n\n{% endblock %}{% endraw %}\n\n### 5. Customizing List View\n\nIf you add a method `get_list_view` in the controller file (job\\_opening.py), you can set properties for the listview\n\ndef get\\_list\\_context(context):\ncontext.title = \\_(\"Jobs\")\ncontext.introduction = \\_('Current Job Openings')", "content_type": "prose", "has_code": false, "token_count": 589}
{"chunk_id": "07_portal_web__guides__portal-development__redirects__001", "module": "07_portal_web", "source_url": "https://docs.frappe.io/framework/v15/user/en/guides/portal-development/redirects", "title": "Redirects", "section_heading": "Examples", "content": "## Examples\n\nYou can add redirects by adding the `website_redirects` hook.\n\n### Examples\n\n```python\nwebsite_redirects = [\n # absolute location\n {\"source\": \"/from\", \"target\": \"https://mysite/from\"},\n\n # relative location\n {\"source\": \"/from\", \"target\": \"/main\"},\n\n # use regex\n {\"source\": \"/from/(.*)\", \"target\": \"/main/\\1\"}\n]\n```", "content_type": "mixed", "has_code": true, "token_count": 82}
