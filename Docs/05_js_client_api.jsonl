{"chunk_id": "05_js_client_api__api__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api", "title": "Api", "section_heading": "Python", "content": "## Python\n\nFrappe aims to achieve minimum cognitive load for its users. Hence, you can find\nthe most used methods and utilities in the `frappe` namespace itself. It's the\nonly import you need (most of the time) in a Python file.\n\n1. [Document](/framework/v14/user/en/api/document)\n2. [Database](/framework/v14/user/en/api/database)\n3. [Jinja](/framework/v14/user/en/api/jinja)\n4. [Common Utilities](/framework/v14/user/en/api/utils)\n5. [Router](/framework/v14/user/en/python-api/routing-and-rendering)\n6. [Response](/framework/v14/user/en/python-api/response)\n7. [Language Resolution](/framework/v14/user/en/python-api/language)\n8. [Search](/framework/v14/user/en/python-api/search)\n9. [Hooks](/framework/v14/user/en/python-api/hooks)\n10. [REST API](/framework/v14/user/en/api/rest)\n11. [Full Text Search](/framework/v14/user/en/api/full-text-search)\n12. [Dialog API](/framework/v14/user/en/api/py-dialog)\n13. [Query Builder](/framework/v14/user/en/api/query-builder)", "content_type": "prose", "has_code": false, "token_count": 241}
{"chunk_id": "05_js_client_api__api__002", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api", "title": "Api", "section_heading": "Javascript", "content": "## Javascript\n\nFrappe attaches itself to the `window` object under the `frappe` namespace. You\nwill find most of the Client API under the `frappe` object. All of these methods\nare only available inside the Desk. A good way to explore these APIs is from the\nbrowser console.\n\n1. [Form](/framework/v14/user/en/api/form)\n2. [Controls](/framework/v14/user/en/api/controls)\n3. [Page](/framework/v14/user/en/api/page)\n4. [Tree](/framework/v14/user/en/api/tree)\n5. [Server Calls (AJAX)](/framework/v14/user/en/api/server-calls)\n6. [Common Utilities](/framework/v14/user/en/api/js-utils)\n7. [Dialog API](/framework/v14/user/en/api/dialog)\n8. [Chart API](/framework/v14/user/en/api/chart)\n9. [Scanner API](/framework/v14/user/en/api/scanner)\n\n### Other\n\n1. [REST API](/framework/v14/user/en/api/rest)\n2. [Jinja API](/framework/v14/user/en/api/jinja)", "content_type": "prose", "has_code": false, "token_count": 210}
{"chunk_id": "05_js_client_api__api__form__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/form", "title": "Form", "section_heading": "Standard Form Scripts", "content": "## Standard Form Scripts\n\nForm Scripts lets you add client side logic to your Forms. You can write Form\nScripts for automatically fetching values, adding validation or adding\ncontextual actions to your Form.\n\n### Standard Form Scripts\n\nWhen you create a new DocType, a `{doctype}.js` is created where you can write\nyour form script.\n\nSyntax:\n\n```python\nfrappe.ui.form.on(doctype, {\n event1() {\n // handle event 1\n },\n event2() {\n // handle event 2\n }\n})\n```\n\nFor example, `todo.js` which is located at `frappe/desk/doctype/todo/todo.js`\nmay look like this:\n\n```python\n// Script for ToDo Form\nfrappe.ui.form.on('ToDo', {\n // on refresh event\n refresh(frm) {\n // if reference_type and reference_name are set,\n // add a custom button to go to the reference form\n if (frm.doc.reference_type && frm.doc.reference_name) {\n frm.add_custom_button(__(frm.doc.reference_name), () => {\n frappe.set_route(\"Form\", frm.doc.reference_type, frm.doc.reference_name);\n });\n }\n }\n})\n```\n\n### Child Table Scripts\n\nChild Table Scripts should be written in the same file as their parent.\n\n```python\nfrappe.ui.form.on('Quotation', {\n // ...\n})\n\nfrappe.ui.form.on('Quotation Item', {\n // cdt is Child DocType name i.e Quotation Item\n // cdn is the row name for e.g bbfcb8da6a\n item_code(frm, cdt, cdn) {\n let row = frappe.get_doc(cdt, cdn);\n }\n})\n```\n\n### Custom Form Scripts\n\nYou can also write form scripts by creating **Client Script** in the system. You\nshould write Client Scripts if the logic is specific to your site. If you want\nto share Form Scripts across sites, you must include them via Apps.\n\nTo create a new Client Script, go to\n\n**Home > Customization > Client Script > New**\n\n![New Client Script](/files/client-script-form.png)\n*New Client Script for Form*", "content_type": "mixed", "has_code": true, "token_count": 437}
{"chunk_id": "05_js_client_api__api__form__002", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/form", "title": "Form", "section_heading": "Form Events", "content": "## Form Events\n\nForm Scripts depend on events to trigger. Here are the list of all Form Events\nthat are triggered by Form.\n\nThese events will get `frm` as the first parameter in their handler functions.\n\n```python\nfrappe.ui.form.on('ToDo', {\n // frm passed as the first parameter\n setup(frm) {\n // write setup code\n }\n})\n```\n\n| Event Name | Description |\n| --- | --- |\n| `setup` | Triggered once when the form is created for the first time |\n| `before_load` | Triggered before the form is about to load |\n| `onload` | Triggered when the form is loaded and is about to render |\n| `refresh` | Triggered when the form is loaded and rendered. |\n| `onload_post_render` | Triggered after the form is loaded and rendered |\n| `validate` | Triggered before before\\_save |\n| `before_save` | Triggered before save is called |\n| `after_save` | Triggered after form is saved |\n| `before_submit` | Triggered before submit is called |\n| `on_submit` | Triggered after form is submitted |\n| `before_cancel` | Triggered before cancel is called |\n| `after_cancel` | Triggered after form is cancelled |\n| `timeline_refresh` | Triggered after form timeline is rendered |\n| `{fieldname}_on_form_rendered` | Triggered when a row is opened as a form in a Table field |\n| `{fieldname}` | Triggered when the value of fieldname is changed |", "content_type": "mixed", "has_code": true, "token_count": 328}
{"chunk_id": "05_js_client_api__api__form__003", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/form", "title": "Form", "section_heading": "Child Table Events", "content": "## Child Table Events\n\nThese events are triggered in the context of a Child Table. Hence, along with\n`frm`, they will also get the `cdt` (Child DocType) and `cdn` (Child Docname)\nparameters in their handler functions.\n\nImagine our \"ToDo\" DocType has a field called \"links\" that contains a Child Table. This Child Table is defined in a DocType called \"Dynamic Link\". We want our code to run whenever a row is added to the table.\n\n```python\n// this code is located inside `todo.js`\n\nfrappe.ui.form.on('Dynamic Link', { // The child table is defined in a DoctType called \"Dynamic Link\"\n links_add(frm, cdt, cdn) { // \"links\" is the name of the table field in ToDo, \"_add\" is the event\n // frm: current ToDo form\n // cdt: child DocType 'Dynamic Link'\n // cdn: child docname (something like 'a6dfk76')\n // cdt and cdn are useful for identifying which row triggered this event\n\n frappe.msgprint('A row has been added to the links table \ud83c\udf89 ');\n }\n});\n```\n\n| Event Name | Description |\n| --- | --- |\n| `before_{fieldname}_remove` | Triggered when a row is about to be removed from a Table field |\n| `{fieldname}_add` | Triggered when a row is added to a Table field |\n| `{fieldname}_remove` | Triggered when a row is removed from a Table field |\n| `{fieldname}_move` | Triggered when a row is reordered to another location in a Table field |\n| `form_render` | Triggered when a row is opened as a form in a Table field |\n\n### Form API\n\nHere are a list of common methods that are available on the `frm` object.\n\n### frm.set\\_value\n\nSet the value of a field. This will trigger the field change event in the form.\n\n```python\n// set a single value\nfrm.set_value('description', 'New description')\n\n// set multiple values at once\nfrm.set_value({\n status: 'Open',\n description: 'New description'\n})\n\n// returns a promise\nfrm.set_value('description', 'New description')\n .then(() => {\n // do something after value is set\n })\n```\n\n### frm.refresh\n\nRefresh the form with the latest values from the server. Will trigger\n`before_load`, `onload`, `refresh`, `timeline_refresh` and `onload_post_render`.\n\n```python\nfrm.refresh();\n```", "content_type": "mixed", "has_code": true, "token_count": 527}
{"chunk_id": "05_js_client_api__api__form__004", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/form", "title": "Form", "section_heading": "frm.save", "content": "## frm.save\n\nTrigger form save. Will trigger `validate`, `before_save`, `after_save`,\n`timeline_refresh` and `refresh`.\n\nIt can be used to trigger other save actions like Submit, Cancel and Update. In\nthat case, the relevant events will be triggered.\n\n```python\n// save form\nfrm.save();\n\n// submit form\nfrm.save('Submit');\n\n// cancel form\nfrm.save('Cancel');\n\n// update form (after submit)\nfrm.save('Update');\n\n// all methods returns a promise\n```\n\n### frm.enable\\\\_save / frm.disable\\\\_save\n\nMethods to enable / disable the Save button in the form.\n\n```python\nif (frappe.user_roles.includes('Custom Role')) {\n frm.enable_save();\n} else {\n frm.disable_save();\n}\n```\n\n### frm.email\\_doc\n\nOpen Email dialog for this form.\n\n```python\n// open email dialog\nfrm.email_doc();\n\n// open email dialog with some message\nfrm.email_doc(`Hello ${frm.doc.customer_name}`);\n```\n\n### frm.reload\\_doc\n\nReload document with the latest values from the server and call `frm.refresh()`.\n\n```python\nfrm.reload_doc();\n```\n\n### frm.refresh\\_field\n\nRefresh the field and it's dependencies.\n\n```python\nfrm.refresh_field('description');\n```\n\n### frm.is\\_dirty\n\nCheck if form values has been changed and is not saved yet.\n\n```python\nif (frm.is_dirty()) {\n frappe.show_alert('Please save form before attaching a file')\n}\n```\n\n### frm.dirty\n\nSet form as \"dirty\". This is used to set form as dirty when document values are\nchanged. This triggers the **\\_\"Not Saved\"\\_** indicator in the Form Views.\n\n```python\nfrm.doc.browser_data = navigator.appVersion;\nfrm.dirty();\nfrm.save();\n```\n\nCalling save without setting the form dirty will trigger a **\\_\"No changes in\ndocument\"\\_** toast.\n\n### frm.is\\_new\n\nCheck if the form is new and is not saved yet.\n\n```python\n// add custom button only if form is not new\nif (!frm.is_new()) {\n frm.add_custom_button('Click me', () => console.log('Clicked custom button'))\n}\n```", "content_type": "mixed", "has_code": true, "token_count": 469}
{"chunk_id": "05_js_client_api__api__form__005", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/form", "title": "Form", "section_heading": "frm.set\\_intro", "content": "## frm.set\\_intro\n\nSet intro text on the top of the form.\nThe function takes two parameters: `message` (string, required) and `color` (string, optional).\n\nColor can be 'blue', 'red', 'orange', 'green' or 'yellow'. Default is blue.\n\n```python\nif (!frm.doc.description) {\n frm.set_intro('Please set the value of description', 'blue');\n}\n```\n\n![Intro text example](/files/Screenshot%202022-04-23%20at%201.56.04%20AM.png)\n*Intro Text Example*\n\n### frm.add\\\\_custom\\_button\n\nAdd a custom button in the inner toolbar of the page. Alias to\n[page.add\\\\_inner\\_button](/framework/v14/user/en/api/page#pageadd_inner_button).\n\n```python\n// Custom buttons\nfrm.add_custom_button('Open Reference form', () => {\n frappe.set_route('Form', frm.doc.reference_type, frm.doc.reference_name);\n})\n\n// Custom buttons in groups\nfrm.add_custom_button('Closed', () => {\n frm.doc.status = 'Closed'\n}, 'Set Status');\n```\n\n### frm.change\\\\_custom\\\\_button\\\\_type\n\nChange a specific custom button type by label (and group).\n\n```python\n// change type of ungrouped button\nfrm.change_custom_button_type('Open Reference form', null, 'primary');\n\n// change type of a button in a group\nfrm.change_custom_button_type('Closed', 'Set Status', 'danger');\n```\n\n### frm.remove\\\\_custom\\_button\n\nRemove a specific custom button by label (and group).\n\n```python\n// remove custom button\nfrm.remove_custom_button('Open Reference form');\n\n// remove custom button in a group\nfrm.remove_custom_button('Closed', 'Set Status');\n```\n\n### frm.clear\\\\_custom\\_buttons\n\nRemove all custom buttons from the inner toolbar.\n\n```python\nfrm.clear_custom_buttons();\n```", "content_type": "mixed", "has_code": true, "token_count": 401}
{"chunk_id": "05_js_client_api__api__form__006", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/form", "title": "Form", "section_heading": "frm.set\\\\_df\\_property", "content": "## frm.set\\\\_df\\_property\n\nChange the docfield property of a field and refresh the field.\n\n```python\n// change the fieldtype of description field to Text\nfrm.set_df_property('description', 'fieldtype', 'Text');\n\n// set the options of the status field to only be [Open, Closed]\nfrm.set_df_property('status', 'options', ['Open', 'Closed'])\n\n// set a field as mandatory\nfrm.set_df_property('title', 'reqd', 1)\n\n// set a field as read only\nfrm.set_df_property('status', 'read_only', 1)\n```\n\n### frm.toggle\\_enable\n\nToggle a field or list of fields as `read_only` based on a condition.\n\n```python\n// set status and priority as read_only\n// if user does not have System Manager role\nlet is_allowed = frappe.user_roles.includes('System Manager');\nfrm.toggle_enable(['status', 'priority'], is_allowed);\n```\n\n### frm.toggle\\_reqd\n\nToggle a field or list of fields as mandatory (`reqd`) based on a condition.\n\n```python\n// set priority as mandatory\n// if status is Open\nfrm.toggle_reqd('priority', frm.doc.status === 'Open');\n```\n\n### frm.toggle\\_display\n\nShow/hide a field or list of fields based on a condition.\n\n```python\n// show priority and due_date field\n// if status is Open\nfrm.toggle_display(['priority', 'due_date'], frm.doc.status === 'Open');\n```", "content_type": "mixed", "has_code": true, "token_count": 312}
{"chunk_id": "05_js_client_api__api__form__007", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/form", "title": "Form", "section_heading": "frm.set\\_query", "content": "## frm.set\\_query\n\nApply filters on a Link field to show limited records to choose from. You must\ncall `frm.set_query` very early in the form lifecycle, usually in `setup` or\n`onload`.\n\n```python\n// show only customers whose territory is set to India\nfrm.set_query('customer', () => {\n return {\n filters: {\n territory: 'India'\n }\n }\n})\n\n// show customers whose territory is any of India, Nepal, Japan\nfrm.set_query('customer', () => {\n return {\n filters: {\n territory: ['in', ['India', 'Nepal', 'Japan']]\n }\n }\n})\n\n// set filters for Link field item_code in\n// items field which is a Child Table\nfrm.set_query('item_code', 'items', () => {\n return {\n filters: {\n item_group: 'Products'\n }\n }\n})\n```\n\nYou can also override the filter method and provide your own custom method on\nthe server side. Just the set the query to the module path of your python method.\n\n```python\n// change the filter method by passing a custom method\nfrm.set_query('fieldname', () => {\n return {\n query: 'dotted.path.to.custom.custom_query',\n filters: {\n field1: 'value1'\n }\n }\n})\n```\n\n```python\n# python method signature\ndef custom_query(doctype, txt, searchfield, start, page_len, filters):\n # your logic\n return filtered_list\n```\n\n### frm.add\\_child\n\nAdd a row with values to a Table field.\n\n```python\nlet row = frm.add_child('items', {\n item_code: 'Tennis Racket',\n qty: 2\n});\n\nfrm.refresh_field('items');\n```", "content_type": "mixed", "has_code": true, "token_count": 347}
{"chunk_id": "05_js_client_api__api__form__008", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/form", "title": "Form", "section_heading": "frm.call", "content": "## frm.call\n\nCall a server side controller method with arguments.\n\n> **Note:** While accessing any server side method using `frm.call()`, you need to whitelist such method using the `@frappe.whitelist` decorator.\n\nFor the following controller code:\n\n```python\nclass ToDo(Document):\n @frappe.whitelist()\n def get_linked_doc(self, throw_if_missing=False):\n if not frappe.db.exists(self.reference_type, self.reference_name):\n if throw_if_missing:\n frappe.throw('Linked document not found')\n\n return frappe.get_doc(self.reference_type, self.reference_name)\n```\n\nYou can call it from client using `frm.call`.\n\n```python\nfrm.call('get_linked_doc', { throw_if_missing: true })\n .then(r => {\n if (r.message) {\n let linked_doc = r.message;\n // do something with linked_doc\n }\n })\n```\n\n### frm.trigger\n\nTrigger any form event explicitly.\n\n```python\nfrappe.ui.form.on('ToDo', {\n refresh(frm) {\n frm.trigger('set_mandatory_fields');\n },\n\n set_mandatory_fields(frm) {\n frm.toggle_reqd('priority', frm.doc.status === 'Open');\n }\n})\n```\n\n### frm.get\\_selected\n\nGet selected rows in Child Tables in an object where key is the table fieldname\nand values are row names.\n\n```python\nlet selected = frm.get_selected()\nconsole.log(selected)\n// {\n// items: [\"bbfcb8da6a\", \"b1f1a43233\"]\n// taxes: [\"036ab9452a\"]\n// }\n```", "content_type": "mixed", "has_code": true, "token_count": 324}
{"chunk_id": "05_js_client_api__api__form__009", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/form", "title": "Form", "section_heading": "frm.ignore\\\\_doctypes\\\\_on\\\\_cancel\\\\_all", "content": "## frm.ignore\\\\_doctypes\\\\_on\\\\_cancel\\\\_all\n\nTo avoid cancellation of linked documents during cancel all, you need to set the\n`frm.ignored_doctypes_on_cancel_all` property with an array of DocTypes of linked documents.\n\n```python\nfrappe.ui.form.on(\"DocType 1\", {\n onload: function(frm) {\n // Ignore cancellation for all linked documents of respective DocTypes.\n frm.ignore_doctypes_on_cancel_all = [\"DocType 2\", \"DocType 3\"];\n }\n}\n```\n\nIn the above example, the system will avoid cancellation for all documents of 'DocType 2' and 'DocType 3' which are linked with document of 'DocType 1' during cancellation.", "content_type": "mixed", "has_code": true, "token_count": 152}
{"chunk_id": "05_js_client_api__api__controls__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/controls", "title": "Controls", "section_heading": "frappe.ui.form.make\\_control", "content": "## frappe.ui.form.make\\_control\n\n`frappe.ui.form.make_control({ parent, df })`\n\nMakes a frappe control based on `df` properties and appends into `parent`\ncontainer.\n\n```python\nfrappe.ui.form.make_control({\n parent: $wrapper.find('.my-control'),\n df: {\n label: 'Due Date',\n fieldname: 'due_date',\n fieldtype: 'Date'\n },\n render_input: true\n})\n```\n\nHere are the `df` properties for most of frappe control types.", "content_type": "mixed", "has_code": true, "token_count": 102}
{"chunk_id": "05_js_client_api__api__controls__002", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/controls", "title": "Controls", "section_heading": "frappe.ui.form.make\\_control", "content": "## frappe.ui.form.make\\_control\n\nHere are the `df` properties for most of frappe control types.\n\n```python\n// Attach\n{\n label: 'Attachment',\n fieldname: 'attachment',\n fieldtype: 'Attach'\n}\n\n// Attach Image\n{\n label: 'User Image',\n fieldname: 'user_image',\n fieldtype: 'Attach Image'\n}\n\n// Autocomplete\n{\n label: 'Select User',\n label: 'user',\n fieldtype: 'Autocomplete',\n options: [\n 'faris@erpnext.com',\n 'suraj@erpnext.com'\n ]\n}\n\n// Barcode\n{\n label: 'Item Barcode',\n fieldname: 'item_barcode',\n fieldtype: 'Barcode'\n}\n\n// Check\n{\n label: 'Enable feature',\n fieldname: 'enable_feature',\n fieldtype: 'Check'\n}\n\n// Code\n{\n label: 'JS Script',\n fieldname: 'script',\n fieldtype: 'Code',\n // for syntax highlighting\n options: 'Javascript' // JS, HTML, CSS, Markdown, SCSS, JSON,\n // wrap code\n wrap: true,\n // changing `max_lines` will set the max-height of the editor\n max_lines: 10,\n // changing `min_lines` will set the min-height of the editor\n min_lines: 5\n}\n\n// Color\n{\n label: 'Your favorite color',\n fieldname: 'user_color',\n fieldtype: 'Color'\n}\n\n// Currency\n{\n label: 'Amount',\n fieldname: 'amount',\n fieldtype: 'Currency',\n options: 'INR' // or name of field which holds currency\n}\n\n// Data\n{\n label: 'First Name',\n fieldname: 'first_name',\n fieldtype: 'Data',\n options: 'Email' // 'Name', 'Phone', 'URL', 'Barcode'\n}\n\n// Date Range\n{\n label: 'Select Date Range',\n fieldname: 'date_range',\n fieldtype: 'Date Range'\n}\n\n// Date\n{\n label: 'Birth Date',\n fieldname: 'birth_date',\n fieldtype: 'Date'\n}\n\n// Datetime\n{\n label: 'Submission Date and Time',\n fieldname: 'submission',\n fieldtype: 'Datetime'\n}\n\n// Dynamic Link\n{\n label: 'Party',\n fieldname: 'party',\n fieldtype: 'Dynamic Link',\n options: 'party_type' // fieldname which holds the Link type\n}\n\n// Float\n{\n label: 'Threshold',\n fieldname: 'threshold',\n fieldtype: 'Float'\n}\n\n// Geolocation\n{\n label: 'Meeting Place',\n fieldname: 'meeting_place',\n fieldtype: 'Geolocation'\n}\n\n// HTML Editor\n{\n label: 'Custom HTML',\n fieldname: 'custom_html',\n fieldtype: 'HTML Editor'\n}\n\n// Int\n{\n label: 'No of days',\n fieldname: 'no_of_days',\n fieldtype: 'Int'\n}\n\n// Link\n{\n label: 'Select User',\n fieldname: 'user',\n fieldtype: 'Link',\n options: 'User' // name of doctype\n}\n\n// Markdown Editor\n{\n label: 'Blog Content',\n fieldname: 'content',\n fieldtype: 'Markdown Editor'\n}\n\n// MultiCheck\n{\n label: 'Blog Content',\n fieldname: 'content',\n fieldtype: 'MultiCheck',\n options: [\n 'Option 1',\n 'Option 2',\n 'Option 3',\n 'Option 4',\n ],\n columns: 2 // break into 2 columns\n}\n\n// MultiSelect\n{\n label: 'Select Users',\n fieldname: 'users',\n fieldtype: 'MultiSelect',\n options: [\n 'faris@erpnext.com',\n 'suraj@erpnext.com',\n 'shivam@erpnext.com'\n ]\n}\n\n// Password\n{\n label: 'New Password',\n fieldname: 'password',\n fieldtype: 'Password'\n}\n\n// Rating\n{\n label: 'Rate your experience',\n fieldname: 'rating',\n fieldtype: 'Rating'\n}\n\n// Select\n{\n label: 'Status',\n fieldname: 'status',\n fieldtype: 'Select',\n options: [\n 'Open',\n 'Closed',\n 'Cancelled'\n ]\n}\n\n// Signature\n{\n label: 'Status',\n fieldname: 'status',\n fieldtype: 'Signature'\n}\n\n// Text Editor\n{\n label: 'Description',\n fieldname: 'description',\n fieldtype: 'Text Editor'\n}\n\n// Time\n{\n label: 'In Time',\n fieldname: 'in_time',\n fieldtype: 'Time'\n}\n\n// Button\n{\n label: 'Fetch',\n fieldname: 'fetch',\n fieldtype: 'Button',\n btn_size: 'xs' // xs, sm, lg\n}\n\n//Icon\n{\n label: 'Page Icon',\n fieldname: 'page_icon',\n fieldtype: 'Icon'\n}\n```", "content_type": "mixed", "has_code": true, "token_count": 858}
{"chunk_id": "05_js_client_api__api__controls__003", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/controls", "title": "Controls", "section_heading": "frappe.ui.form.make\\_control", "content": "## frappe.ui.form.make\\_control\n\n### Adding Custom Formatters\n\nYou can add custom formatters for text type objects (Data, Select, Text etc) by adding them to the `docfield` object in `frappe.meta.docfield_map`\n\nExample:\n\n```python\nfrappe.meta.docfield_map['DocField'].fieldtype.formatter = (value) => {\n if (value==='Section Break') return '\ud83d\udd35 Section Break';\n else return value;\n}\n```", "content_type": "mixed", "has_code": true, "token_count": 96}
{"chunk_id": "05_js_client_api__api__list__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/list", "title": "List", "section_heading": "Standard List JS", "content": "## Standard List JS\n\nThe List View is generated for all DocTypes except Child Tables and Single DocTypes.\n\nThe List view is packed with features. Some of them are:\n\n* Filters\n* Sorting\n* Paging\n* Filter by tags\n* Switch view to Report, Calendar, Gantt, Kanban, etc.\n\n![List View](/files/list-view.png)\n*List View*\n\n### Standard List JS\n\nTo customize the List View you must have a `{doctype}_list.js` file in the doctype directory.\nBelow are all the options that can be customized.\n\nFor instance, if you want to customize the Note DocType, you'll have to create a file `note_list.js` with the following contents.\n\n```python\nfrappe.listview_settings['Note'] = {\n // add fields to fetch\n add_fields: ['title', 'public'],\n // set default filters\n filters: [\n ['public', '=', 1]\n ],\n hide_name_column: true, // hide the last column which shows the `name`\n onload(listview) {\n // triggers once before the list is loaded\n },\n before_render() {\n // triggers before every render of list records\n },\n \n // set this to true to apply indicator function on draft documents too\n has_indicator_for_draft: false,\n \n get_indicator(doc) {\n // customize indicator color\n if (doc.public) {\n return [__(\"Public\"), \"green\", \"public,=,Yes\"];\n } else {\n return [__(\"Private\"), \"darkgrey\", \"public,=,No\"];\n }\n },\n primary_action() {\n // triggers when the primary action is clicked\n },\n get_form_link(doc) {\n // override the form route for this doc\n },\n // add a custom button for each row\n button: {\n show(doc) {\n return doc.reference_name;\n },\n get_label() {\n return 'View';\n },\n get_description(doc) {\n return __('View {0}', [`${doc.reference_type} ${doc.reference_name}`])\n },\n action(doc) {\n frappe.set_route('Form', doc.reference_type, doc.reference_name);\n }\n },\n // format how a field value is shown\n formatters: {\n title(val) {\n return val.bold();\n },\n public(val) {\n return val ? 'Yes' : 'No';\n }\n }\n}\n```", "content_type": "mixed", "has_code": true, "token_count": 472}
{"chunk_id": "05_js_client_api__api__list__002", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/list", "title": "List", "section_heading": "Custom List JS", "content": "## Custom List JS\n\nYou can also customize the list view by creating **Client Script** in the\nsystem. You should write Client Scripts if the logic is specific to your site.\nIf you want to share List view customization across sites, you must include them\nvia Apps.\n\nTo create a new Client Script, go to\n\n**Home > Customization > Client Script > New**\n\n![New Client Script](/files/client-script-list.png)\n*New Client Script for List*\n\nThe above customization will result in a list view that looks like this:\n\n![List View Customized](/files/list-view-customized.png)\n*List View Customized*", "content_type": "prose", "has_code": false, "token_count": 146}
{"chunk_id": "05_js_client_api__api__page__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/page", "title": "Page", "section_heading": "frappe.ui.make\\\\_app\\\\_page", "content": "## frappe.ui.make\\\\_app\\\\_page\n\nEvery screen inside the Desk is rendered inside a `frappe.ui.Page` object.\n\n### frappe.ui.make\\\\_app\\\\_page\n\nCreates a new Page and attaches it to parent.\n\n```python\nlet page = frappe.ui.make_app_page({\n title: 'My Page',\n parent: wrapper // HTML DOM Element or jQuery object\n single_column: true // create a page without sidebar\n})\n```\n\n![New Page](/files/new-page.png)\n*New Page*\n\n### Page methods\n\nThis section lists out the common methods available on the page instance object.\n\n### page.set\\_title\n\nSet the page title along with the document title. The document title is shown in\nbrowser tab.\n\n```python\npage.set_title('My Page')\n```\n\n![Page Title](/files/page-set-title.png)\n*Page Title*\n\n### page.set\\\\_title\\\\_sub\n\nSet the secondary title of the page. It is shown on the right side of the page\nheader.\n\n```python\npage.set_title_sub('Subtitle')\n```\n\n![Page Subtitle](/files/page-set-title-sub.png)\n*Page Subtitle*\n\n### page.set\\_indicator\n\nSet the indicator label and color.\n\n```python\npage.set_indicator('Pending', 'orange')\n```\n\n![Page Indicator](/files/page-set-indicator.png)\n*Page Indicator*\n\n### page.clear\\_indicator\n\nClear the indicator label and color.\n\n```python\npage.clear_indicator()\n```\n\n### page.set\\\\_primary\\_action\n\nSet the primary action button label and handler. The third argument is the icon\nclass which will be shown in mobile view.\n\n```python\nlet $btn = page.set_primary_action('New', () => create_new(), 'octicon octicon-plus')\n```\n\n![Page Primary Action](/files/page-primary-action.png)\n*Page Primary Action*\n\n### page.clear\\\\_primary\\_action\n\nClear primary action button and handler.\n\n```python\npage.clear_primary_action()\n```\n\n### page.set\\\\_secondary\\_action\n\nSet the secondary action button label and handler. The third argument is the\nicon class which will be shown in mobile view.\n\n```python\nlet $btn = page.set_secondary_action('Refresh', () => refresh(), 'octicon octicon-sync')\n```\n\n![Page Secondary Action](/files/page-secondary-action.png)\n*Page Secondary Action*\n\n### page.clear\\\\_secondary\\_action\n\nClear secondary action button and handler.\n\n```python\npage.clear_secondary_action()\n```\n\n### page.add\\\\_menu\\_item\n\nAdd menu items in the Menu dropdown.\n\n```python\n// add a normal menu item\npage.add_menu_item('Send Email', () => open_email_dialog())\n\n// add a standard menu item\npage.add_menu_item('Send Email', () => open_email_dialog(), true)\n```\n\n![Page Menu Dropdown](/files/page-menu-dropdown.png)\n*Page Menu Dropdown*\n\n### page.clear\\_menu\n\nRemove Menu dropdown with items.\n\n```python\npage.clear_menu()\n```\n\n### page.add\\\\_action\\_item\n\nAdd menu items in the Actions dropdown.\n\n```python\n// add a normal menu item\npage.add_action_item('Delete', () => delete_items())\n```\n\n![Page Actions Dropdown](/files/page-actions-dropdown.png)\n*Page Actions Dropdown*\n\n### page.clear\\\\_actions\\_menu\n\nRemove Actions dropdown with items.\n\n```python\npage.clear_actions_menu()\n```", "content_type": "mixed", "has_code": true, "token_count": 736}
{"chunk_id": "05_js_client_api__api__page__002", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/page", "title": "Page", "section_heading": "page.add\\\\_inner\\_button", "content": "## page.add\\\\_inner\\_button\n\nAdd buttons in the inner toolbar.\n\n```python\n// add a normal inner button\npage.add_inner_button('Update Posts', () => update_posts())\n```\n\n![Page Inner Button](/files/page-inner-button.png)\n*Page Inner Button*\n\n```python\n// add a dropdown button in a group\npage.add_inner_button('New Post', () => new_post(), 'Make')\n```\n\n![Page Inner Button Group](/files/page-inner-button-group.png)\n*Page Inner Button Group*\n\n### page.change\\\\_custom\\_button\\_type\n\nChange a specific custom button type by label (and group).\n\n```python\n// change type of ungrouped button\npage.change_inner_button_type('Update Posts', null, 'primary');\n\n// change type of a button in a group\npage.change_inner_button_type('Delete Posts', 'Actions', 'danger');\n```\n\n### page.remove\\\\_inner\\_button\n\nRemove buttons in the inner toolbar.\n\n```python\n// remove inner button\npage.remove_inner_button('Update Posts')\n\n// remove dropdown button in a group\npage.remove_inner_button('New Posts', 'Make')\n```\n\n### page.clear\\\\_inner\\_toolbar\n\nRemove the inner toolbar.\n\n```python\npage.remove_inner_toolbar()\n```\n\n### page.add\\_field\n\nAdd a form control in the page form toolbar.\n\n```python\nlet field = page.add_field({\n label: 'Status',\n fieldtype: 'Select',\n fieldname: 'status',\n options: [\n 'Open',\n 'Closed',\n 'Cancelled'\n ],\n change() {\n console.log(field.get_value());\n }\n});\n```\n\n![Page Form Toolbar](/files/page-add-field.png)\n*Page Form Toolbar*\n\n### page.get\\\\_form\\_values\n\nGet all form values from the page form toolbar in an object.\n\n```python\nlet values = page.get_form_values()\n// { status: 'Open', priority: 'Low' }\n```\n\n### page.clear\\_fields\n\nClear all fields from the page form toolbar.\n\n```python\npage.clear_fields()\n```", "content_type": "mixed", "has_code": true, "token_count": 431}
{"chunk_id": "05_js_client_api__api__tree__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/tree", "title": "Tree", "section_heading": "Standard Tree JS", "content": "## Standard Tree JS\n\nThe Tree View is generated for all DocTypes that has Is Tree enabled.\n\n![Tree View](/files/treeview.png)\n*Tree View*\n\n### Standard Tree JS\n\nTo customize the Tree View you must have a `{doctype}_tree.js` file in the doctype directory.\nBelow are all the options that can be customized.\n\nFor instance, if you want to configure the Account DocType, you'll have to create a file `account_tree.js` with the following contents.\n\n```python\nfrappe.treeview_settings['Account'] = {\n breadcrumb: 'Accounting',\n title: 'Chart of Accounts',\n filters: [\n {\n fieldname: 'company',\n fieldtype:'Select',\n options: 'Company 1\nCompany 2',\n label: 'Company',\n on_change: handle_company_change()\n }\n ],\n get_tree_nodes: 'path.to.whitelisted_method.get_children',\n add_tree_node: 'path.to.whitelisted_method.handle_add_account',\n // fields for a new node\n fields: [\n {\n fieldtype: 'Data', fieldname: 'account_name',\n label: 'New Account Name', reqd: true\n },\n {\n fieldtype: 'Link', fieldname: 'account_currency',\n label: 'Currency', options: 'Currency'\n },\n {\n fieldtype: 'Check', fieldname: 'is_group', label: 'Is Group'\n }\n ],\n // ignore fields even if mandatory\n ignore_fields: ['parent_account'],\n // to add custom buttons under 3-dot menu group\n menu_items: [\n {\n label: 'New Company',\n action: function() { frappe.new_doc('Company', true) },\n condition: 'frappe.boot.user.can_create.indexOf('Company') !== -1'\n }\n ],\n onload: function(treeview) {\n // triggered when tree view is instanciated\n },\n post_render: function(treeview) {\n // triggered when tree is instanciated\n },\n onrender: function(node) {\n // triggered when a node is instanciated\n },\n on_get_node: function(nodes) {\n // triggered when `get_tree_nodes` returns nodes\n }\n // enable custom buttons beside each node\n extend_toolbar: true,\n // custom buttons to be displayed beside each node\n toolbar: [\n {\n label: 'Add Child',\n condition: function(node) {},\n click: function() {},\n btnClass: 'hidden-xs'\n }\n ]\n}\n```", "content_type": "mixed", "has_code": true, "token_count": 495}
{"chunk_id": "05_js_client_api__api__js-utils__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/js-utils", "title": "Js Utils", "section_heading": "frappe.get\\_route", "content": "## frappe.get\\_route\n\n`frappe.get_route()`\n\nReturns the current route as an array.\n\n```python\nfrappe.get_route()\n// [\"List\", \"Task\", \"List\"]\n```\n\n### frappe.set\\_route\n\n`frappe.set_route(route)`\n\nChanges the current route to `route`.\n\n```python\n// route in parts\nfrappe.set_route('List', 'Task', 'List')\n\n// route as array\nfrappe.set_route(['List', 'Task', 'Gantt'])\n\n// route as string\nfrappe.set_route('List/Event/Calendar')\n\n// route with options\nfrappe.set_route(['List', 'Task', 'Task'], { status: 'Open' })\n```\n\n### frappe.format\n\n`frappe.format(value, df, options, doc)`\n\nFormat a raw value into user presentable format.\n\n```python\nfrappe.format('2019-09-08', { fieldtype: 'Date' })\n// \"09-08-2019\"\n\nfrappe.format('2399', { fieldtype: 'Currency', options: 'currency' }, { inline: true })\n// \"2,399.00\"\n```\n\n### frappe.provide\n\n`frappe.provide(namespace)`\n\nCreates a namespace attached to the window object if it doesn't exist.\n\n```python\nfrappe.provide('frappe.ui.form');\n\n// has the same effect as\nwindow.frappe = {}\nwindow.frappe.ui = {}\nwindow.frappe.ui.form = {}\n```\n\n### frappe.require\n\n`frappe.require(asset_path, callback)`\n\nLoad a JS or CSS asset asynchronously. It is used for libraries that are not\nused often.\n\n```python\n// load a single asset\nfrappe.require('/assets/frappe/chat.js', () => {\n // chat.js is loaded\n})\n\n// load multiple assets\nfrappe.require(['/assets/frappe/chat.js', '/assets/frappe/chat.css'], () => {\n // chat.js and chat.css are loaded\n})\n```", "content_type": "mixed", "has_code": true, "token_count": 370}
{"chunk_id": "05_js_client_api__api__dialog__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/dialog", "title": "Dialog", "section_heading": "frappe.ui.Dialog", "content": "## frappe.ui.Dialog\n\nFrappe provides a group of standard, interactive and flexible dialogs that are easy to configure and use. There's also an API for [Python](/framework/v14/user/en/api/py-dialog).\n\n### frappe.ui.Dialog\n\n`new frappe.ui.Dialog({ title, fields, primary_action })`\n\nCreates a new Dialog instance.\n\n```python\nlet d = new frappe.ui.Dialog({\n    title: 'Enter details',\n    fields: [\n        {\n            label: 'First Name',\n            fieldname: 'first_name',\n            fieldtype: 'Data'\n        },\n        {\n            label: 'Last Name',\n            fieldname: 'last_name',\n            fieldtype: 'Data'\n        },\n        {\n            label: 'Age',\n            fieldname: 'age',\n            fieldtype: 'Int'\n        }\n    ],\n    size: 'small', // small, large, extra-large \n    primary_action_label: 'Submit',\n    primary_action(values) {\n        console.log(values);\n        d.hide();\n    }\n});\n\nd.show();\n```\n\n![Dialog](/files/dialog-api-custom-dialog.png) *frappe.ui.Dialog*", "content_type": "mixed", "has_code": true, "token_count": 250}
{"chunk_id": "05_js_client_api__api__dialog__002", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/dialog", "title": "Dialog", "section_heading": "frappe.msgprint", "content": "## frappe.msgprint\n\n`frappe.msgprint(message)` or `frappe.msgprint({ title, message, indicator })`\n\nShow `message` in a modal.\n\n```python\n// only message\nfrappe.msgprint(__('Document updated successfully'));\n\n// with options\nfrappe.msgprint({\n    title: __('Notification'),\n    indicator: 'green',\n    message: __('Document updated successfully')\n});\n```\n\n![Msgprint](/files/dialog-api-msgprint.png) *frappe.msgprint*\n\nYou can also bind a primary action to this dialog by passing `action`(as a method) within `primary_action`. Alternatively, `primary_action` can contain `server_action` **or** `client_action`.\n\nThe `server_action` and `client_action` are dotted paths to the respective methods which will execute on clicking the primary button.\n\n```python\n// with primary action\n frappe.msgprint({\n    title: __('Notification'),\n    message: __('Are you sure you want to proceed?'),\n    primary_action:{\n        action(values) {\n            console.log(values);\n        }\n    }\n});\n\n// with server and client action\nfrappe.msgprint({\n    title: __('Notification'),\n    message: __('Are you sure you want to proceed?'),\n    primary_action: {\n    'label': 'Proceed',\n    // either one of the actions can be passed\n    'server_action': 'dotted.path.to.method',\n    'client_action': 'dotted_path.to_method',\n    'args': args\n    }\n});\n```\n\n![Msgprint with Primary Action](/files/dialog-api-msgprint-with-primary-action.png) *frappe.msgprint with primary action bound*\n\n### frappe.throw\n\n`frappe.throw(error_message)`\n\nShow `error_message` in a modal and `throw` exception.\n\n```python\nfrappe.throw(__('This is an Error Message'))\n```\n\n![Throw](/files/dialog-api-throw.png) *frappe.throw*", "content_type": "mixed", "has_code": true, "token_count": 420}
{"chunk_id": "05_js_client_api__api__dialog__003", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/dialog", "title": "Dialog", "section_heading": "frappe.prompt", "content": "## frappe.prompt\n\n`frappe.prompt(label)` or `frappe.prompt(df)` or `frappe.prompt(fields)`\n\nPrompt user for a value or list of values.\n\n```python\n// prompt for single value of type Data\nfrappe.prompt('First Name', ({ value }) => console.log(value))\n\n// Set title and button label\nfrappe.prompt('First Name', console.log, 'Enter First Name', 'Submit');\n\n// prompt for single value of any type\nfrappe.prompt({\n    label: 'Birth Date',\n    fieldname: 'date',\n    fieldtype: 'Date'\n}, (values) => {\n    console.log(values.date);\n})\n\n// prompt for multiple values\nfrappe.prompt([\n    {\n        label: 'First Name',\n        fieldname: 'first_name',\n        fieldtype: 'Data'\n    },\n    {\n        label: 'Last Name',\n        fieldname: 'last_name',\n        fieldtype: 'Data'\n    },\n], (values) => {\n    console.log(values.first_name, values.last_name);\n})\n```\n\n![Prompt](/files/dialog-api-prompt.png) *frappe.prompt*\n\n### frappe.confirm\n\n`frappe.confirm(message, if_yes, if_no)`\n\nShow a confirmation modal, executes `if_yes` if confirmation is given else executes `if_no`.\n\n```python\nfrappe.confirm('Are you sure you want to proceed?',\n    () => {\n        // action to perform if Yes is selected\n    }, () => {\n        // action to perform if No is selected\n    })\n```\n\n![Prompt](/files/dialog-api-confirm.png) *frappe.confirm*", "content_type": "mixed", "has_code": true, "token_count": 330}
{"chunk_id": "05_js_client_api__api__dialog__004", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/dialog", "title": "Dialog", "section_heading": "frappe.warn", "content": "## frappe.warn\n\n`frappe.warn(title, message_html, proceed_action, primary_label, is_minimizable)`\n\nShow a warning modal, executes `proceed_actiion` if confirmation is given. It can be set as `minimizable` which allows the dialog to be minimized.\n\n```python\nfrappe.warn('Are you sure you want to proceed?',\n    'There are unsaved changes on this page',\n    () => {\n        // action to perform if Continue is selected\n    },\n    'Continue',\n    true // Sets dialog as minimizable\n)\n```\n\n![Prompt](/files/dialog-api-warn.png) *frappe.confirm*\n\n### frappe.show\\_alert\n\n`frappe.show_alert(message, seconds)` or `frappe.show_alert({message, indicator}, seconds)`\n\nAlert Dialog is used for showing non-obstructive messages.\n\nIts parameters include `message`, which can contain the indicator color as well, and its display duration. The default is **7 seconds**.\n\n```python\nfrappe.show_alert('Hi, you have a new message', 5);\n\n//show_alert with indicator\nfrappe.show_alert({\n    message:__('Hi, you have a new message'),\n    indicator:'green'\n}, 5);\n```\n\n![Show Alert](/files/dialog-api-show-alert.png) *frappe.show\\_alert*\n\n### frappe.show\\_progress\n\n`frappe.show_progress(title, count, total, description)`\n\nDisplays a progress bar with `count` (as current progress) and `total` (as maximum progress value).\n\n```python\nfrappe.show_progress('Loading..', 70, 100, 'Please wait');\n```\n\n![Show Progress](/files/dialog-api-progress.png) *frappe.show\\_progress*", "content_type": "mixed", "has_code": true, "token_count": 362}
{"chunk_id": "05_js_client_api__api__dialog__005", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/dialog", "title": "Dialog", "section_heading": "frappe.new\\_doc", "content": "## frappe.new\\_doc\n\n`frappe.new_doc(doctype, route_options, init_callback)`\n\nOpens a new form of the specified DocType that allows to edit and save it. If \"Quick Entry\" is enabled for the DocType (that allows to enter the most important fields) the \"Quick Entry\" pop-up window will be shown. Otherwise you will be redirected to the usual document entry form.\n\nFor example, let's create a new **Task**:\n\n```python\nfrappe.new_doc(\"Task\");\n```\n\nOften when you are creating a new document in the user interface you want to initialize some of its fields based on the user interaction that triggered the creation. The other two arguments can be used for such initialization.\n\nSpecifically, the `route_options` argument is a quick and convenient way to set any field of type Link, Select, Data, or Dynamic Link in the new document. Its value should be an object whose keys are the desired field names and whose values are the initial values.\n\n```python\nfrappe.new_doc(\"Task\", {subject: \"New Task\"});\n```\n\nIf you need to do any other initialization of the new document that is not possible with `route_options`, `init_callback` gives you full control. It should be a function of one argument. If the doctype is initialized with a \"Quick Entry\" form, the callback is called with the \"Quick Entry\" dialog object just before control is released back to the user. Otherwise, the callback is called with the new document just before the user is allowed to edit it in the standard form.\n\n```python\nfrappe.new_doc(\"Task\", {subject: \"New Task\"},\n                doc => {doc.description = \"Do what's necessary\";});\n```\n\nNote that `subject` is a field of type \"Data\", so we are able to take advantage of the `route_options` argument to set it. `description` is a field of type \"Text Editor\", so if we want to initialize it, that must be done in the callback.\n\nFor a slightly more complex example, here's a call that creates a new **Journal Entry** of type \"Bank Entry\" and populates one side of the transaction:\n\n```python\nfrappe.new_doc(\"Journal Entry\", {\"voucher_type\": \"Bank Entry\"}, doc => {\n    doc.posting_date = frappe.datetime.get_today();\n    let row = frappe.model.add_child(doc, \"accounts\");\n    row.account = 'Bank - A';\n    row.account_currency = 'USD';\n    row.debit_in_account_currency = 100.0;\n    row.credit_in_account_currency = 0.0;\n});\n```", "content_type": "mixed", "has_code": true, "token_count": 585}
{"chunk_id": "05_js_client_api__api__dialog__006", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/dialog", "title": "Dialog", "section_heading": "frappe.ui.form.MultiSelectDialog", "content": "## frappe.ui.form.MultiSelectDialog\n\n`new frappe.ui.form.MultiSelectDialog({ doctype, target, setters, date_field, get_query, action })`\n\nA MultiSelectDialog consists of filter fields followed by a multiple selection list. The primary button will perform the passed `action` on the selected options.\n\nBy default, the **Search Term** field and **Date Range** field will compose the filter fields.\n\nThe argument list includes:\n\n* `doctype`: The source to fetch and display selection entries from.\n* `target`: The target where the modal is to be displayed.\n* `setters`: These will compose the filter fields and values to populate them with. These also translate to custom columns for the selection list.\n* `add_filters_group`: A boolean value to add/remove the filter group in the dialog below `setters`. The filter group is same as the list view filters.\n* `date_field`: It is necessary to pass the `date_field` of the DocType in consideration.\n* `get_query`: A function that returns `query` and `filters` to query the selection list. A custom server side method can be passed via `query`, and `filters` will be passed to that method.\n* `action`: Contains the primary action to be performed on the selected options. It takes `selections` as a parameter, which comprises of the selected options.\n* `columns`: An array of fields returned by custom query which will become columns in result datatable. Only works with the custom query (`get_query` argument returning a `query`).\n\nLet us assume we want to fetch Material Requests into our dialog. We can then go on to invoke the MultiSelectDialog in the following manner:\n\n```python\nnew frappe.ui.form.MultiSelectDialog({\n    doctype: \"Material Request\",\n    target: this.cur_frm,\n    setters: {\n        schedule_date: null,\n        status: 'Pending'\n    },\n    add_filters_group: 1,\n    date_field: \"transaction_date\",\n    get_query() {\n        return {\n            filters: { docstatus: ['!=', 2] }\n        }\n    },\n    action(selections) {\n        console.log(selections);\n    }\n});\n\n// MultiSelectDialog with custom query method\nlet query_args = {\n    query:\"dotted.path.to.method\",\n    filters: { docstatus: [\"!=\", 2], supplier: \"John Doe\" }\n}\n\nnew frappe.ui.form.MultiSelectDialog({\n    doctype: \"Material Request\",\n    target: this.cur_frm,\n    setters: {\n        schedule_date: null,\n        status: 'Pending'\n    },\n    add_filters_group: 1,\n    date_field: \"transaction_date\",\n    columns: [\"name\", \"transaction_date\", \"status\"],\n    get_query() {\n        return query_args;\n    },\n    action(selections) {\n        console.log(selections);\n    }\n});\n```", "content_type": "mixed", "has_code": true, "token_count": 651}
{"chunk_id": "05_js_client_api__api__dialog__007", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/dialog", "title": "Dialog", "section_heading": "frappe.ui.form.MultiSelectDialog", "content": "## frappe.ui.form.MultiSelectDialog\n\n![MultiSelectDialog](/files/dialog-api-multiselectdialog.png) *frappe.ui.form.MultiSelectDialog*\n\nHere all the Material Requests that fulfill the filter criteria will be fetched into the selection area. The setter `company` is added to the filter fields along with its passed value. The `date_field` will be used to fetch and query dates from the DocType mentioned.\n\nThe **Make Material Request** (or `Make {DocType}`) secondary action button will redirect you to a new form in order to make a new entry into the DocType passed.\n\nNow, if we want to only select particular item from a Material Request, then we can use optional `child_selection_mode` to enable child selection\n\n```python\n// MultiSelectDialog for individual child selection\nnew frappe.ui.form.MultiSelectDialog({\n    doctype: \"Material Request\",\n    target: this.cur_frm,\n    setters: {\n        schedule_date: null,\n        status: null\n    },\n    add_filters_group: 1,\n    date_field: \"transaction_date\",\n    allow_child_item_selection: 1,\n    child_fieldname: \"items\", // child table fieldname, whose records will be shown &amp; can be filtered\n    child_columns: [\"item_code\", \"qty\"], // child item columns to be displayed\n    get_query() {\n        return {\n            filters: { docstatus: ['!=', 2] }\n        }\n    },\n    action(selections, args) {\n        console.log(args.filtered_children); // list of selected item names\n    }\n});\n```\n\n![MultiSelectDialog](/files/dialog-api-multiselectdialog-child-selection.png) *frappe.ui.form.MultiSelectDialog*\n\nHere you will see a checkbox **Select Individual Items** to toggle between child item selection & parent selection. Once you toggle it, all the individual Material Requests Items are listed from the all the queried Material Request, you can now filter these items for selection.\n\nTo access the selected children, you can use `args.filtered_children` list which contains selected child item names.", "content_type": "mixed", "has_code": true, "token_count": 489}
{"chunk_id": "05_js_client_api__api__chart__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/chart", "title": "Chart", "section_heading": "frappe.ui.RealtimeChart", "content": "## frappe.ui.RealtimeChart\n\nFrappe provides easy-to-use and fully configurable SVG charts. You can learn about them in the Frappe Chart's [documentation](https://frappe.io/charts).\n\n### frappe.ui.RealtimeChart\n\n`new frappe.ui.RealtimeChart(dom_element, event_name, max_label_count, data)`\n\nCreates a new RealtimeChart instance that adds real-time data update functionality on top of the Frappe Chart API.\n\n`dom_element`: HTML Element to be used to render the Chart.\n`event_name`: Socket event which will provide the data stream.\n`max_label_count`: Maximum number of labels allowed on the x-axis.\n`data`: Data for the chart to be initialized with.\n\n```python\n// Empty data array\nconst data = {\n datasets: [\n {\n name: \"Some Data\",\n values: [],\n },\n ],\n};\n\n// Realtime Chart initialization\nlet chart = new frappe.ui.RealtimeChart(\"#chart\", \"test_event\", 8, {\n title: \"My Realtime Chart\",\n data: data,\n type: \"line\",\n height: 250,\n colors: [\"#7cd6fd\", \"#743ee2\"]\n});\n```\n\nHere is the sample client code to render a chart over the specified socket event.\n\nThe following python code can be executed as a cron job using [Hook](https://frappeframework.com/docs/v14/user/en/python-api/hooks) functionality.\n\n```python\ndata = {\n 'label': 1,\n 'points': [10]\n}\nfrappe.publish_realtime('test_event', data)\n```\n\nThe `label` key specifies the label to be appended in the Chart. The `points` key specifies the array of points to be plotted. The number of values in the `points` array depends on the number of datasets.\n\nThis would produce a Chart like\n\n![RealtimeChart](/files/realtime-chart.png)\n\n### frappe.ui.RealtimeChart.start\\_updating\n\n`frappe.ui.RealtimeChart.start_updating()`\n\nStart listening to the specified socket event and update the RealtimeChart accordingly.\n\n```python\nfrappe.ui.RealtimeChart.start_updating();\n```\n\n![RealtimeChart](/files/realtime-chart-demo.gif)\n\\_frappe.ui.RealtimeChart.start\\_updating\\_\n\n### frappe.ui.RealtimeChart.stop\\_updating\n\n`frappe.ui.RealtimeChart.stop_updating()`\n\nStop listening to the socket event that RealtimeChart was initialized with.\n\n```python\nfrappe.ui.RealtimeChart.stop_updating();\n```\n\n### frappe.ui.RealtimeChart.update\\_chart\n\n`frappe.ui.update_chart(label, data)`\n\nManually updates RealtimeChart by appending the label and associated data to the end of the chart.\n\n```python\nfrappe.ui.update_chart(2, [30]);\n```", "content_type": "mixed", "has_code": true, "token_count": 589}
{"chunk_id": "05_js_client_api__api__scanner__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/scanner", "title": "Scanner", "section_heading": "frappe.ui.Scanner", "content": "## frappe.ui.Scanner\n\nFrappe uses the open-source library [Html5-QRCode](https://github.com/mebjas/html5-qrcode) to provide a flexible way to handle inputs like Barcodes, QRCodes, etc. using the device camera.\n\n### frappe.ui.Scanner\n\n```python\nnew frappe.ui.Scanner({ ... })\n```\n\nCreates a new Scanner instance that can be used to scan single or multiple barcodes.\n\nOptions:\n\n* `container`: Dom element under which video feed from the camera will be shown.\n* `dialog`: If set as `true`, will open a dialog to show video feed from the camera.\n* `multiple`: If set as `false`, will stop scanning after one successful scan.\n* `on_scan`: Callback method to handle the scanned input.\n\nHere is a sample client code to scan one single barcode and log it to the console.\n\n```python\nnew frappe.ui.Scanner({\n dialog: true, // open camera scanner in a dialog\n multiple: false, // stop after scanning one value\n on_scan(data) {\n console.log(data.decodedText);\n }\n});\n```\n\nThe below code can be used to continously scan and handle the scanned input.\n\n```python\nconst scanner = new frappe.ui.Scanner({\n dialog: true, // open camera scanner in a dialog\n multiple: true, // stop after scanning one value\n on_scan(data) {\n handle_scanned_barcode(data.decodedText);\n }\n});\n```\n\nTo stop the scanning, you can either close the dialog or use `scanner.stop_scan();`", "content_type": "mixed", "has_code": true, "token_count": 335}
{"chunk_id": "05_js_client_api__api__server-calls__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/server-calls", "title": "Server Calls", "section_heading": "frappe.call", "content": "## frappe.call\n\n`frappe.call(method, args)`\n\nMakes an AJAX request to the server, where the `method` which is the dotted path\nto a whitelisted Python method, is executed and it's return value is sent as the\nresponse.\n\n```python\n// call with no parameters\nfrappe.call('ping')\n .then(r => {\n console.log(r)\n // {message: \"pong\"}\n })\n\n// call with a single parameter\nfrappe.call('frappe.core.doctype.user.user.get_role_profile', {\n role_profile: 'Test'\n}).then(r => {\n console.log(r.message)\n})\n\n// call with all options\nfrappe.call({\n method: 'frappe.core.doctype.user.user.get_role_profile',\n args: {\n role_profile: 'Test'\n },\n // disable the button until the request is completed\n btn: $('.primary-action'),\n // freeze the screen until the request is completed\n freeze: true,\n callback: (r) => {\n // on success\n },\n error: (r) => {\n // on error\n }\n})\n```\n\n### frappe.db.get\\_doc\n\n`frappe.db.get_doc(doctype, name, filters)`\n\nReturns the Document object of `doctype` and `name`. If `name` is not provided,\ngets the first document matched by `filters`.\n\n```python\n// get doc by name\nfrappe.db.get_doc('Task', 'TASK00002')\n .then(doc => {\n console.log(doc)\n })\n\n// get doc by filters\nfrappe.db.get_doc('Task', null, { status: 'Open' })\n .then(doc => {\n console.log(doc)\n })\n```\n\n### frappe.db.get\\_list\n\n`frappe.db.get_list(doctype, { fields, filters })`\n\nReturns a list of records of `doctype` with `fields` and `filters`.\n\n```python\nfrappe.db.get_list('Task', {\n fields: ['subject', 'description'],\n filters: {\n status: 'Open'\n }\n}).then(records => {\n console.log(records);\n})\n```", "content_type": "mixed", "has_code": true, "token_count": 394}
{"chunk_id": "05_js_client_api__api__server-calls__002", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/server-calls", "title": "Server Calls", "section_heading": "frappe.db.get\\_value", "content": "## frappe.db.get\\_value\n\n`frappe.db.get_value(doctype, name, fieldname)`\n\nReturns a document's field value or a list of values.\n\n```python\n// single value\nfrappe.db.get_value('Task', 'TASK00004', 'status')\n .then(r => {\n console.log(r.message.status) // Open\n })\n\n// multiple values\nfrappe.db.get_value('Task', 'TASK00004', ['status', 'subject'])\n .then(r => {\n let values = r.message;\n console.log(values.status, values.subject)\n })\n\n// using filters\nfrappe.db.get_value('Task', {status: 'Open'}, 'subject')\n .then(r => {\n let values = r.message;\n console.log(values.subject)\n })\n```\n\n### frappe.db.get\\\\_single\\\\_value\n\n`frappe.db.get_single_value(doctype, field)`\n\nReturns a field value from a Single DocType.\n\n```python\nfrappe.db.get_single_value('System Settings', 'time_zone')\n .then(time_zone => {\n console.log(time_zone);\n })\n```", "content_type": "mixed", "has_code": true, "token_count": 209}
{"chunk_id": "05_js_client_api__api__server-calls__003", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/server-calls", "title": "Server Calls", "section_heading": "frappe.db.set\\_value", "content": "## frappe.db.set\\_value\n\n`frappe.db.set_value(doctype, docname, fieldname, value, callback)`\n\nSets a document's property using `frappe.get_doc` and `doc.save` on server.\n\n```python\n// update a field's value\nfrappe.db.set_value('Task', 'TASK00004', 'status', 'Open')\n .then(r => {\n let doc = r.message;\n console.log(doc);\n })\n\n// update multiple fields\nfrappe.db.set_value('Task', 'TASK00004', {\n status: 'Working',\n priority: 'Medium'\n}).then(r => {\n let doc = r.message;\n console.log(doc);\n})\n```\n\n### frappe.db.insert\n\n`frappe.db.insert(doc)`\n\nInsert a new document.\n\n```python\nfrappe.db.insert({\n doctype: 'Task',\n subject: 'New Task'\n}).then(doc => {\n console.log(doc);\n})\n```\n\n### frappe.db.count\n\n`frappe.db.count(doctype, filters)`\n\nReturns number of records for a given `doctype` and `filters`.\n\n```python\n// total number of Task records\nfrappe.db.count('Task')\n .then(count => {\n console.log(count)\n })\n\n// total number of Open Tasks\nfrappe.db.count('Task', { status: 'Open' })\n .then(count => {\n console.log(count)\n })\n```\n\n### frappe.db.delete\\_doc\n\n`frappe.db.delete_doc(doctype, name)`\n\nDelete a document identified by `doctype` and `name`.\n\n```python\nfrappe.db.delete_doc('Task', 'TASK00004')\n```\n\n### frappe.db.exists\n\n`frappe.db.exists(doctype, name)`\n\nReturns true if a document record exists.\n\n```python\nfrappe.db.exists('Task', 'TASK00004')\n .then(exists => {\n console.log(exists) // true\n })\n```", "content_type": "mixed", "has_code": true, "token_count": 353}
{"chunk_id": "05_js_client_api__api__logging__001", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/logging", "title": "Logging", "section_heading": "frappe.log\\_level", "content": "## frappe.log\\_level\n\nLogging is a means of tracking events that happen when some software runs. Under the bench architecture, with multitenancy, it might get really complicated really fast to track down and eliminate any uncertainties. You may wan't to log events along with circumstantial, variable data.\n\nFrappe implements Python's [logging module](https://docs.python.org/3/howto/logging.html) to maintain bench and site wise logs. `Version 13` uses Log Rotation to maintain the last 20 files along with the current running of *100kB* each for the *out of the box* log files.\n\n### frappe.log\\_level\n\nMaintains the log level of Frappe processes. To learn more about logging levels, you can check out Python's [documentation](https://docs.python.org/dev/library/logging.html#logging.Logger.setLevel).\n\n### frappe.utils.logger.set\\_log\\_level\n\n`frappe.utils.logger.set_log_level(level)` can be used to set the log level and regenerate the loggers dynamically.", "content_type": "prose", "has_code": false, "token_count": 240}
{"chunk_id": "05_js_client_api__api__logging__002", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/logging", "title": "Logging", "section_heading": "frappe.loggers", "content": "## frappe.loggers\n\n`frappe.loggers` maintains a `dict` of active loggers in your process. The key is the name of the logger, typically \"{module}-{site}\" and the value holds the Logger instance.\n\nA web worker may have `frappe.loggers` such as the following if [docs.erpnext.com](https://docs.erpnext.com/) and [frappeframework.com](https://frappeframework.com) are the sites on the bench.\n\n```python\n{\n    \"frappe.web-docs.erpnext.com\": <logger frappe.web-docs.erpnext.com=\"\" (debug)=\"\">,\n    \"frappe.web-frappeframework.com\": <logger frappe.web-frappeframework.com=\"\" (debug)=\"\">\n}\n```\n\n### frappe.logger\n\n`frappe.logger(module, with_more_info, allow_site, filter, max_size, file_count)`\n\nReturns a `logging.Logger` object with Site and Bench level logging capabilities. If logger doesn't already exist, creates and updates`frappe.loggers`.\n\nArguments:\n\n* **module**: Name of your logger and consequently your log file.\n* **with\\_more*\\_*info**: Will log the `Form Dict` as additional information, typically useful for requests.\n* **allow\\_site**: Pass site name to explicitly log under it's logs. If `True` and unspecified, guesses which site the logs would be saved under.\n* **filter**: Add a filter function for your logger.\n* **max\\_size**: Max file size of each log file in bytes.\n* **file\\_count**: Max count of log files to be retained via Log Rotation.", "content_type": "mixed", "has_code": true, "token_count": 340}
{"chunk_id": "05_js_client_api__api__logging__003", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/logging", "title": "Logging", "section_heading": "Usage", "content": "## Usage\n\n```python\nfrappe.logger(\"frappe.web\").debug({\n    \"site\": \"frappeframework.com\",\n    \"remote_addr\": \"192.148.1.7\",\n    \"base_url\": \"https://frappeframework.com/docs/v14/user/en/api/logging\",\n    \"full_path\": \"/docs/v14/user/en/api/logging\",\n    \"method\": \"POST\",\n    \"scheme\": \"https\",\n    \"http_status_code\": 200\n})\n```\n\n```python\n2020-07-31 16:06:55,067 DEBUG frappe.web {'site': 'frappeframework.com', 'remote_addr': '192.148.1.7', 'base_url': 'https://frappeframework.com/docs/v14/user/en/api/logging', 'full_path': '/docs/v14/user/en/api/logging', 'method': 'POST', 'scheme': 'https', 'http_status_code': 200}\n```\n\nThe above entry would be logged under `./logs/frappe.web.log` and `./sites/frappeframework.com/logs/frappe.web.log` files.\n\n> Usage specified as implemented in [app.py#L102-L110](https://github.com/frappe/frappe/blob/fe22595e854e3fb3fa4dbcbd6d9dacdf94e73462/frappe/app.py#L102-L110)", "content_type": "mixed", "has_code": true, "token_count": 228}
{"chunk_id": "05_js_client_api__api__logging__004", "module": "05_js_client_api", "source_url": "https://docs.frappe.io/framework/v15/user/en/api/logging", "title": "Logging", "section_heading": "Example", "content": "## Example\n\nConsider a scenario where you've written an API for updating a counter with the value sent by the user and return the updated value. Now you want to log information in the API, to make sure it's working as expected. So, you create a logger `api` to track events for the same.\n\n```python\nfrappe.utils.logger.set_log_level(\"DEBUG\")\nlogger = frappe.logger(\"api\", allow_site=True, file_count=50)\n\n@frappe.whitelist()\ndef update(value):\n    user = frappe.session.user\n    logger.info(f\"{user} accessed counter_app.update with value={value}\")\n\n    current_value = frappe.get_single_value(\"Value\", \"counter\")\n    updated_value = current_value + value\n    logger.debug(f\"{current_value} + {value} = {updated_value}\")\n    frappe.db.set_value(\"Value\", \"Value\", \"counter\", updated_value)\n    logger.info(f\"{user} updated value to {value}\")\n\n    return updated_value\n```\n\nAPI calls made to this endpoint will now start getting logged in your `api.log` as follows\n\n```python\n2020-07-31 16:06:55,067 INFO api gavin@frappe.io accessed counter_app.update with value 100\n2020-07-31 16:06:55,067 DEBUG api 1000 + 100 = 1100\n2020-07-31 16:06:55,068 INFO api gavin@frappe.io updated value to 1100\n```\n\n> Learn more about Logging in Frappe [here](/framework/v14/user/en/logging)", "content_type": "mixed", "has_code": true, "token_count": 317}
